# โ ููุฎุต ุฅุตูุงุญ ูุดููุฉ ุญูุธ ุงูุจูุงูุงุช

## ๐ ุงููุดููุฉ ุงูุฃุตููุฉ

**ุงูุณุคุงู:** 
> ููู ูู ููุงุนุฏ ุงูุจูุงูุงุช ุงูุญุณุงุจุงุช ูุด ุจุชุชุญูุธ ุฒู ุญุณุงุจ ุงูุฌุงูุน ุงู ุงููุณุชุฎุฏู ูููู ุงูุจูุงูุงุช ุจุชุนุชูู ูุด ุจุชุธูุฑ ูู ุงููููุนุ

**ุงูุฌูุงุจ:** 
ูุงู ููู **ุงููุทุงุน ูุงูู** ุจูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช!

---

## ๐ ุงูุณุจุจ ุงูุฌุฐุฑู

### **ุงููุดููุฉ ุงูุชูููุฉ:**

ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุงุณุชุฎุฏูุช **sql.js** (ูุงุนุฏุฉ ุจูุงูุงุช ูู ุงูุฐุงูุฑุฉ):
```typescript
// โ ูุฏูู - ูุญูุธ ูู ุงูุฐุงูุฑุฉ ููุท
import initSqlJs from 'sql.js';
const dbInstance = new SQL.Database();
localStorage.setItem('jami_sqlite_db', JSON.stringify(arr));
```

ูุงูุฎุงุฏู ุงุณุชุฎุฏู **Node.js SQLite** (ูุงุนุฏุฉ ุจูุงูุงุช ุญููููุฉ):
```javascript
// โ ุงูุฎุงุฏู - ูุงุนุฏุฉ ุจูุงูุงุช ุญููููุฉ
import sqlite3 from 'sqlite3';
const db = new sqlite3.Database(DB_PATH);
```

**ุงููุชูุฌุฉ:** 
- ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุชุญูุธ ูู localStorage
- ุงูุฎุงุฏู ูู ูุงุนุฏุฉ ุจูุงูุงุช ูููุตูุฉ ุชูุงูุงู
- **ุงูุจูุงูุงุช ุจุชุถูุน ุนูุฏ ุชุญุฏูุซ ุงูุตูุญุฉ!** ๐ด

---

## โ ุงูุญู ุงููุทุจู

### **1. ุชุญุฏูุซ dbService.ts**

**ูุจู:**
```typescript
// โ sql.js ูู ุงูุฐุงูุฑุฉ
const dbInstance = new SQL.Database();
localStorage.setItem('jami_sqlite_db', ...);
```

**ุจุนุฏ:**
```typescript
// โ API Backend - ูุงุนุฏุฉ ุจูุงูุงุช ุญููููุฉ
const apiCall = async (method, endpoint, body) => {
    const response = await fetch(`${API_BASE}${endpoint}`, {
        method, headers: { 'Content-Type': 'application/json' }, body
    });
    return response.json();
};

export const dbQueries = {
    getUsers: async () => apiCall('GET', '/users'),
    addUser: async (user) => apiCall('POST', '/users/register', user),
    // ... ุฌููุน ุงูุฏูุงู ุงูุฃุฎุฑู
};
```

โ **ุงููุงุฆุฏุฉ:** ุฌููุน ุงูุจูุงูุงุช ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญููููุฉ

---

### **2. ุชุญุฏูุซ AppContext.tsx**

**ูุจู:**
```typescript
// โ synchronous - ูุง ููุชุธุฑ ุงููุชูุฌุฉ
const login = (name, phone) => {
    let user = dbQueries.getUserByPhone(phone);
    dbQueries.addUser(user);
    setCurrentUser(user);
};
```

**ุจุนุฏ:**
```typescript
// โ async - ููุชุธุฑ ุงูุฎุงุฏู ููุฒุงูู ุงูุจูุงูุงุช
const login = async (name, phone) => {
    const user = await APIService.loginUser(name, phone);
    await refreshData(); // ุฌูุจ ูู ุงูุจูุงูุงุช ูู ุงูุฎุงุฏู
    setCurrentUser(user);
    localStorage.setItem('jami_user_id', user.id);
};

const refreshData = async () => {
    const [mosques, lessons, users, posts] = await Promise.all([
        dbQueries.getMosques(),
        dbQueries.getLessons(),
        dbQueries.getUsers(),
        dbQueries.getPosts()
    ]);
    // ุชุญุฏูุซ ุงูุญุงูุฉ
};
```

โ **ุงููุงุฆุฏุฉ:** ุงูุชุทุจูู ุงูุขู ูุฒุงูู ูุน ุงูุฎุงุฏู ุชููุงุฆูุงู

---

### **3. ุชุญุฏูุซ server/index.js**

**ุฅุถุงูุฉ endpoints ูุงูุตุฉ:**

```javascript
// โ ุฅุนุงุฏุฉ ุตูุงุบุฉ ุงููุณุงุฑุงุช
app.post('/api/support/tickets', ...); // ุชุฐุงูุฑ ุงูุฏุนู
app.post('/api/posts/:postId/unlike', ...); // ุฅูุบุงุก ุงูุฅุนุฌุงุจ
app.put('/api/posts/:postId/edit', ...); // ุชุนุฏูู ุงูููุดูุฑ
app.get('/api/tasbih-logs/total/:userId', ...); // ุฅุฌูุงูู ุงูุชุณุจูุญ
app.delete('/api/posts/:postId/comments/:commentId', ...); // ุญุฐู ุงูุชุนููู
```

โ **ุงููุงุฆุฏุฉ:** ุฌููุน ุงูุนูููุงุช ุนูุฏูุง endpoints ุตุญูุญ

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

| ุงูููุฒุฉ | ูุจู ุงูุฅุตูุงุญ | ุจุนุฏ ุงูุฅุตูุงุญ |
|--------|-----------|-----------|
| ุญูุธ ุญุณุงุจ ุงููุณุชุฎุฏู | ๐ด ุชุถูุน | โ ูุญููุธุฉ |
| ุญูุธ ุงูุฌุงูุน | ๐ด ุชุถูุน | โ ูุญููุธุฉ |
| ุญูุธ ุงูููุดูุฑุงุช | ๐ด ุชุถูุน | โ ูุญููุธุฉ |
| ุงูุฅุนุฌุงุจุงุช | ๐ด ุชุถูุน | โ ูุญููุธุฉ |
| ุงูุชุนูููุงุช | ๐ด ุชุถูุน | โ ูุญููุธุฉ |
| ุจุนุฏ ุชุญุฏูุซ ุงูุตูุญุฉ | ๐ด ูู ุดูุก ูุฎุชูู | โ ุงูุจูุงูุงุช ููุฌูุฏุฉ |

---

## ๐ ููููุฉ ุงูุชุดุบูู ุงูุขู

### **ุงูุฎุงุฏู:**
```bash
cd c:\Users\kali\Desktop\mosqee\server
node index.js
```

### **ุงูุชุทุจูู:**
```bash
cd c:\Users\kali\Desktop\mosqee
npm run dev
```

### **ุงูุงุฎุชุจุงุฑ:**
```bash
# ูู PowerShell
$response = Invoke-WebRequest http://localhost:5000/api/posts -UseBasicParsing
$response.Content | ConvertFrom-Json | Format-Table
```

---

## ๐ ุงูููุงุท ุงูุฃุณุงุณูุฉ

| ุงูููุทุฉ | ุงูุดุฑุญ |
|------|------|
| **ุงููุดููุฉ** | ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ูุงูุฎุงุฏู ูู ููููุง ูุชูุงุตููู |
| **ุงูุณุจุจ** | ุงุณุชุฎุฏุงู sql.js ุจุฏู API ุงุชุตุงู ุญูููู |
| **ุงูุญู** | ุฌุนู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุชุณุชุฏุนู ุงูุฎุงุฏู ุฏุงุฆูุงู |
| **ุงููุชูุฌุฉ** | ุฌููุน ุงูุจูุงูุงุช ูุญููุธุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญููููุฉ |

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

```
โ services/dbService.ts        โ ุชุญููู ูู sql.js ุฅูู API
โ context/AppContext.tsx       โ ุฌุนู ุงูุฏูุงู async
โ server/index.js              โ ุฅุถุงูุฉ endpoints ูุงูุตุฉ
โ server/database.js           โ ูุง ุชุญุชุงุฌ ูุชุบููุฑ (ุฌุงูุฒ)
```

---

## ๐ ุงููุชูุฌุฉ

**ุงูุขู:**
- โ ุงูุจูุงูุงุช **ุชูุญูุธ ุจุดูู ุฏุงุฆู**
- โ ุงูุญุณุงุจุงุช **ุชุธูุฑ ูู ุงููููุน**
- โ ุงูุจูุงูุงุช **ูุง ุชุถูุน ุนูุฏ ุงูุชุญุฏูุซ**
- โ ูู ุดูุก **ูุชุฒุงูู ูุน ุงูุฎุงุฏู**

---

## ๐ ุงููุฑุงุฌุน ุงููููุฏุฉ

- `DATA_PERSISTENCE_FIX_COMPLETE.md` - ุฏููู ุงุฎุชุจุงุฑ ุดุงูู
- `RUN_NOW.md` - ุฏููู ุชุดุบูู ุณุฑูุน

---

**ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ!** โจ๐
